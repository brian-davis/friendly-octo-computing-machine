<%= form_with(model: producer, data: { controller: "producers", producers_id_value: @producer.id }) do |form| %>
  <%= render("shared/form_errors", form: form) %>
  <ul class="flex-outer">
    <%# ROW 1 %>
    <li>
      <%# COLUMN 1 %>
      <%= form.label :name %>

      <%# COLUMN 2 %>
      <%= form.text_field :name, { placeholder: "name required" } %>
    </li>

    <%# ROW 2 %>
    <li>
      <%# COLUMN 1 %>
      <p>
        Works
        <br><br>

        <span style="margin-left: 1em; font-size: smaller">
          <%= link_to(build_work_producers_path(producer_id: @producer.try(:id)),class: "link-button", data: { turbo_stream: true }) do %>
            New Book &nbsp; &nbsp;+
          <% end %>
        </span>
        <br><br>

        <span style="margin-left: 1em; font-size: smaller">
        <%= select_tag("works", options_for_select(@work_options), { include_blank: "Select Work", class: "select-button", data: { action: "change->producers#selectWork" }}) %>
      </p>

      <%# COLUMN 2 %>
      <div id="sub_form_list" data-controller="dismissable">
        <% @work_producers.each do |work_producer| %>
          <div class="subFormContainer" data-dismissable-target="subForm">
            <%= form.fields_for :work_producers, work_producer do |t| %>
              <%= t.hidden_field :id %>

              <div class="subform-line">
                <i style="font-size: smaller;"><%= work_producer.role.titleize %>:</i>

                <%# display only; ignore on submit %>
                <%= text_field_tag(:_work_title, work_producer.work.title, readonly: true) %>
              </div>

              <div class="subform-line">
                <span class="check-label" style="position:relative; top:2px; right: 4px">
                  <%= t.check_box :_destroy %><b style="position:relative; bottom:3px;font-size:smaller;color: red">undo</b>
                </span>
              </div>
            <% end %>
          </div>
       <% end %>
      </div>
    </li>

    <%# ROW 3 %>
    <li>
      <%# COLUMN 1 %>
      <%= form.button "Submit", type: "submit", name: "commit", value: "Submit", data: { disable_with: "Submit" } %>
    </li>
  </ul>
<% end %>