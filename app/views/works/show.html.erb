<p style="color: green"><%= notice %></p>

<h3><%= @work.title %></h3>
  <div id="<%= dom_id @work %>" class="outline">
    <% if @work.custom_citation.present? %>
      <div class="book-card outline bibliography-citation small-text">
        <%= raw markdown.render(@work.custom_citation) %>
      </div>
    <% elsif @work.book_bibliography? %>
      <div class="book-card outline bibliography-citation small-text">
        <%= raw markdown.render(@work.bibliography_markdown) %>
      </div>
    <% end %>

    <p class="small-text indented">
      <%= alternate_title_line(@work) %>
    </p>

    <p class="small-text indented">
      <%= language_line(@work) %>
    </p>

    <p class="small-text indented">
      Rating: <%= rating_stars(@work) %>
    </p>
  <hr>

  <div style="margin-bottom: 1em; cloud-list;">
    <b>Tags</b>
  </div>

  <div style="margin-bottom: 1em;" class="cloud-list">
    <% @work.tags.each do |tag| %>
      <%= link_to(works_path({ tag: tag }), style: "text-decoration: none;", data: { turbo_stream: true, action: "click->sortable#decorateTagClick", filter_value: tag }) do %>
        <span class="model-tag">
          <span class="model-tag-name">
            <%= tag %>
          </span>
        </span>
      <% end %>
    <% end %>
  </div>

  <hr>
  <b>Authors</b>
  <ul class="associated-items">
    <% if @work.work_producers.empty? %>
      <span class="empty-list">EMPTY</span>
    <% else %>
      <% @work.work_producers.joins(:producer).merge(Producer.order(:name)).each do |wp| %>
        <li>
          <%= wp.role.titleize.split(" ").join("-") %>:
          <%= link_to wp.producer.name, wp.producer, class: "index-link" %>
        </li>
      <% end %>
    <% end %>
  </ul>

  <hr>
  <b>Quotes</b>
  <br>
  <div>
    Count: <%= @work.quotes.count %>
    <%= link_to("Go To Quotes ðŸ‘‰", work_quotes_path(@work), class: "index-link") %>
  </div>

  <hr>
  <b>Notes</b>
  <br>
  <div>
    Count: <%= @work.notes.count %>
    <%= link_to("Go To Notes ðŸ‘‰", work_notes_path(@work), class: "index-link") %>
  </div>
</div>

<div class="nav-links outline" data-controller="confirmable">
  <%= link_to "Back to books", works_path, class: "nav-button" %>
  <%= link_to "Back to top", root_path, class: "nav-button" %>
  <%= link_to "Edit this work", edit_work_path(@work), class: "nav-button nav-action" %>
  <%= html_delete_button(@work, "Destroy Book") %>
</div>
